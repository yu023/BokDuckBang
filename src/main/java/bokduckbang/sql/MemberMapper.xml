<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="MemberMapper">
  <insert id="insertMember" parameterType="java.util.HashMap">
   	  INSERT INTO member
   	  (
   	  	member_email,
   	  	member_type,
   	  	member_password
   	  )
   	  values(
   	  	#{member_email},
   	  	#{member_type},
   	  	#{member_password}
   	  )
  </insert>
  <insert id="insertLessor" parameterType="bokduckbang.member.MemberLessor">
   	  INSERT INTO member_lessor
   	  (
   	  	member_email,
   	  	member_password,
   	  	member_business_license,
   	  	member_business_name,
   	  	member_ceo_name,
   	  	member_business_phn_num
   	  )
   	  values(
   	  	#{member_email}
   	  	,#{member_password}
   	  	,#{member_business_license}
   	  	,#{member_business_name}
   	  	,#{member_ceo_name}
   	  	,#{member_business_phn_num}
   	  )
  </insert>
  <insert id="insertLessee" parameterType="bokduckbang.member.MemberLessee">
   	  INSERT INTO member_lessee
   	  (
   	  	member_email
   	  	,member_password
   	  	,member_phone
		,member_name
		<if test="member_like_room_type != null">
			,member_like_room_type
		</if>
		<if test="member_dest_loc != null">
			,member_dest_loc
		</if>
		<if test="member_dest_lat != null">
			,member_dest_lat
		</if>
		<if test="member_dest_lng != null">
			,member_dest_lng
		</if>
		<if test="member_like_room_num != null">
			,member_like_room_num
		</if>
   	  )
   	  values(
   	  	#{member_email}
   	  	,#{member_password}
   	  	,#{member_phone}
   	  	,#{member_name}
   	  	<if test="member_like_room_type != null">
   	  		,#{member_like_room_type}
   	  	</if>
   	  	<if test="member_dest_loc != null">
   	  		,#{member_dest_loc}
   	  	</if>
   	  	<if test="member_dest_lat != null">
   	  		,#{member_dest_lat}
   	  	</if>
   	  	<if test="member_dest_lng != null">
   	  		,#{member_dest_lng}
   	  	</if>
   	  	<if test="member_like_room_num != null">
   	  		,#{member_like_room_num}
   	  	</if>
   	  )
  </insert>
  <insert id="insertLikes" parameterType="java.util.HashMap">
   	  INSERT INTO room_likes
   	  (
   	  	likes_member_id,
   	  	likes_room
   	  )
   	  values(
   	  	#{likes_member_id},
   	  	#{likes_room}
   	  )
  </insert>
  <select id="checkId" parameterType="java.util.HashMap" resultType="object">
	  	select member_email from member where member_email = #{id};
  </select>
  <select id="businessLicenseChecker" parameterType="java.util.HashMap" resultType="object">
	  	select member_email from member_lessor where member_business_license = #{member_business_license};
  </select>
  <select id="checkMember" parameterType="bokduckbang.member.CheckMember" resultType="bokduckbang.member.Member">
  	select
  	member_email
	,member_password
	,member_type
	,member_create_date
	from member
	<where>
		<if test="member_email != null">
			AND
			member_email = #{member_email}
		</if>
		<if test="member_password != null">
			AND
			member_password = #{member_password}
		</if>
	</where>
  </select>
  <select id="getLikes" parameterType="string" resultType="object">
	  	select likes_room from room_likes
	  	where likes_member_id = #{value}
	  	order by member_create_date desc;
  </select>
  <select id="checkLikes" parameterType="java.util.HashMap" resultType="object">
	  	select likes_room from room_likes
	  	where
	  	likes_member_id = #{likes_member_id}
	  	AND
	  	likes_room = #{likes_room}
  </select>
  <update id="deleteLikes" parameterType="string">
  	   DELETE FROM room_likes
  	   WHERE likes_member_id = #{likes_member_id}
	   and likes_room = #{likes_room}
  </update>
</mapper>